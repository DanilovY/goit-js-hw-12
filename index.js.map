{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47498478-5b3c5ee421281cd3bcc4956d2';\n\nexport async function getImages(search, page) {\n  const { data } = await axios(`https://pixabay.com/api/?`, {\n    params: {\n      key: API_KEY,\n      q: search,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  });\n  return data;\n}\n","export const creatImg = images =>\n  images\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img class=\"gallery-img\"\n                src=\"${image.webformatURL}\" \n                alt=\"${image.tags}\" \n                width=\"360\" \n                height=\"200\"/>\n                <ul class=\"img-info-list\">\n                    <li class=\"img-info-item\">\n                        <p class=\"info-title\">Likes</p>\n                        <p class=\"info-value\">${image.likes}</p>\n                    </li>\n                    <li class=\"img-info-item\">\n                        <p class=\"info-title\">Views</p>\n                       <p class=\"info-value\">${image.views}</p>\n                    </li>\n                    <li class=\"img-info-item\">\n                        <p class=\"info-title\">Comments</p>\n                        <p class=\"info-value\">${image.comments}</p>\n                    </li>\n                    <li class=\"img-info-item\">\n                        <p class=\"info-title\">Downloads</p>\n                        <p class=\"info-value\">${image.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>`\n    )\n    .join('');\n","import { getImages } from './js/pixabay-api';\nimport { creatImg } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\niziToast.settings({\n  position: 'topRight',\n  maxWidth: '432px',\n});\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery-list');\nconst moreBtn = document.querySelector('.more');\nconst galleryImg = new SimpleLightbox('.gallery-item .gallery-link', {\n  captionsData: 'alt',\n});\nlet inputValue = '';\nlet page = 1;\n\nform.addEventListener('submit', handSub);\nmoreBtn.addEventListener('click', handMore);\n\nfunction handSub(event) {\n  event.preventDefault();\n  inputValue = event.target.elements.input.value.trim();\n  page = 1;\n\n  if (inputValue === '') {\n    loader.classList.add('visually-hidden');\n    moreBtn.classList.add('visually-hidden');\n    iziToast.warning({\n      message: 'The field is empty!',\n    });\n    return;\n  }\n\n  getImages(inputValue, page)\n    .then(response => {\n      if (response.total === 0) {\n        gallery.innerHTML = '';\n        throw new Error();\n      }\n      loader.classList.add('visually-hidden');\n      moreBtn.classList.remove('visually-hidden');\n      return response;\n    })\n\n    .then(response => {\n      if (response.total <= 15) {\n        gallery.innerHTML = '';\n        gallery.innerHTML = creatImg(response.hits);\n        galleryImg.refresh();\n        loader.classList.add('visually-hidden');\n        moreBtn.classList.add('visually-hidden');\n        setTimeout(() => {\n          iziToast.warning({\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n          });\n        }, 1500);\n      }\n      if (response.total > 15) {\n        gallery.innerHTML = '';\n        gallery.innerHTML = creatImg(response.hits);\n        galleryImg.refresh();\n        loader.classList.add('visually-hidden');\n        moreBtn.classList.remove('visually-hidden');\n      }\n    })\n    .catch(() => {\n      loader.classList.add('visually-hidden');\n      moreBtn.classList.add('visually-hidden');\n      iziToast.error({\n        iconColor: '#ffffff',\n        messageColor: '#ffffff',\n        progressBarColor: '#ffffff',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    })\n    .finally(() => {\n      event.target.elements.input.value = '';\n    });\n}\n\nasync function handMore(event) {\n  page += 1;\n  moreBtn.disabled = true;\n  try {\n    const nextPage = await getImages(inputValue, page);\n    gallery.insertAdjacentHTML('beforeend', creatImg(nextPage.hits));\n    galleryImg.refresh();\n\n    if (\n      nextPage.hits.length < 15 ||\n      page === Math.ceil(nextPage.totalHits / 15)\n    ) {\n      moreBtn.classList.add('visually-hidden');\n      setTimeout(() => {\n        iziToast.warning({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }, 2000);\n    }\n\n    const item = document.querySelector('.gallery-item');\n    let itemHeight = Math.ceil(item.getBoundingClientRect().height);\n    window.scrollBy({\n      left: 0,\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    moreBtn.disabled = false;\n  }\n}\n"],"names":["API_KEY","getImages","search","page","data","axios","creatImg","images","image","iziToast","form","loader","gallery","moreBtn","galleryImg","SimpleLightbox","inputValue","handSub","handMore","event","response","nextPage","item","itemHeight","error"],"mappings":"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"}